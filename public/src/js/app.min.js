let deferredPrompt;const enableNotificationsButtons=document.querySelectorAll(".enable-notifications");window.Promise||(window.Promise=Promise),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("Service worker registered")}).catch(function(i){console.log(i)}),window.addEventListener("beforeinstallprompt",function(i){return console.log("beforeinstallprompt fired"),i.preventDefault(),deferredPrompt=i,!1});const displayConfirmNotification=()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(i=>{i.showNotification("Successfully subscribed!",{body:"You successfully subscribed to our notification service.",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boat.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirm-notification",renotify:!1,actions:[{action:"confirm",title:"Okay",icon:"/src/images/icons/app-icon-96x96.png"},{action:"cancel",title:"Cancel",icon:"/src/images/icons/app-icon-96x96.png"}]})})};configurePushSub=(()=>{var i;"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(o=>(i=o).pushManager.getSubscription()).then(o=>{if(null===o){const o=urlBase64ToUint8Array("BFb-s1IckXJ9y9gjfNbLiX-bP4VG_A0-LwusyBiezvdV9bk_4Q9Fi5YKsZL3P09yvMEj_zdOOr7dYlrYRWHOsOc");return i.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:o})}}).then(i=>fetch("https://pwagram-f2499.firebaseio.com/subscriptions.json",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)})).then(i=>{i.ok&&"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(i=>{i.showNotification("Successfully subscribed!",{body:"You successfully subscribed to our notification service.",icon:"/src/images/icons/app-icon-96x96.png",image:"/src/images/sf-boat.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/app-icon-96x96.png",tag:"confirm-notification",renotify:!1,actions:[{action:"confirm",title:"Okay",icon:"/src/images/icons/app-icon-96x96.png"},{action:"cancel",title:"Cancel",icon:"/src/images/icons/app-icon-96x96.png"}]})})}).catch(i=>{console.log(i)})});const askForNotificationPermission=()=>{Notification.requestPermission(i=>{console.log("User Choice",i),"granted"!==i?console.log("No notification permission granted!"):configurePushSub()})};"Notification"in window&&enableNotificationsButtons.forEach(i=>{i.style.display="inline-block",i.onclick=askForNotificationPermission});